[
  {
    "path": "posts/Project_Assignment/",
    "title": "Analysis of crimes in London - EDA using Spatial clustering, hotspot clustering and trend analysis",
    "description": "The analysis is part of the bigger Shiny-based Visual Analytics Application (Shiny-VAA) project for the course ISSS608- Visual Analytics offered in SMU MITB. This analysis will focus in details on 2 components of the project, namely Exploratory Data Analysis (EDA) and spatial clustering.",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-04-11",
    "categories": [],
    "contents": "\r\n\r\nimg {\r\n    max-width: none;\r\n\r\n    /* other options:\r\n    max-width: 1200px;\r\n    */\r\n}\r\nObjective\r\nThere is a growing emphasis on crime analysis by law enforcement agencies over the past decades. Crime analysis is defined as the systematic study of crime and disorder problems as well as other police-related issues—including socio-demographic, spatial, and temporal factors—to assist the police in criminal apprehension, crime and disorder reduction, crime prevention, and evaluation (Santos, 2016).\r\nA literature review will be conducted to understand the how analysis of crime data was done before. Thereafter,This article will analyse historical crimes in Greater London, UK, particularly using the hot-spots and spatial clustering methods to give insights on the crime in the metropolitan.\r\nThe analysis will be presented in the form of visualization and they will be part of the Shiny-App dashboard in the future.\r\n1. Storyboard\r\nThe storyboard will depict the EDA module of the ShinyApp and it would consists of filter panel, geo-spatial visualization and time series of crimes.\r\nStoryboardIt is important to show visualize the EDA in geo-spatial format as the data touches on crimes within a city and it would be difficult to view the difference in crimes across the city if a crosstab was used to display it.\r\nThe time series line plot would allow one to observe any trends over time.\r\nA filter panel is essential to maximise interactivity. However, this will be explored during the coding of the ShinyApp.\r\n2. Literature review\r\nThere are different methods in displaying geo-spatial data. Based on studies by Tennekes, M., tmap R package provides a wide range of plotting methods for users. If the exact locations of each crime is known, they could be plotted as a dot map.\r\nDot map of crimes in Greater London, (Tennekes, M., 2018)Tennekes had demonstrated that the smooth_map function with the package could visualize crime density by area in a smoothed density contoured lines and spatial polygons that represent areas with uniform density value,\r\nKernel density map of crimes in Greater London, (Tennekes, M., 2018)While the Kernel density map for the crime is able to show area with high density of crimes per area, it does not partake any spatial autocorrection analysis to visualize spatial pattern or hotspot detection. Chaikaew, Tripathi & Souris had written an article on “Exploring spatial patterns and hotspots of diarrhea in Chiang Mai, Thailand” and they had applied an drew up an flowchart to depict how they devise their analysis.\r\nFlowchart of analysing spatial patterns and hotspots, (Chaikaew, Tripathi & Souris., 2009)They have utilized local Moran statistics and locations by type of association (LISA cluster map) to indicate spatial clusters. On the other hand, they had calculated local spatial correlation indices to display the hotspots. Nonetheless, a multiplicative measure of overall spatial association of values which fall within a given distance of each other, such as Getis and Ord’s G-Statistics could be explored to depict distance based clustering.\r\nMoran scatter plot matrix and LISA cluster map of DMBR for p < 0.01, (Chaikaew, Tripathi & Souris., 2009)Literature Source\r\nNakarin Chaikaew, Nitin K Tripathi & Marc Souris, Exploring spatial patterns and hotspots of diarrhea in Chiang Mai, Thailand, International Journal of Health Geographics, 24 June 2009\r\nTennekes, M., tmap: Thematic Maps in R, for Journal of Statistical Software, April 2018, Volume 84, Issue 6.\r\n3. Step-by-step Data Preparation\r\n3.1 Installing and launching relevant R packages\r\n3.2 Datasource\r\nThe datasets used in this analysis are taken from London Datastore, which is a data repository created by Greater London Authority (GLA). The datasets for the analysis are as follows:\r\nRecorded Crime: Geographic Breakdown\r\nHistoric crimes from Mar 2010 till Dec 2018\r\nRecent 24 months crimes\r\nStatistical GIS Boundary Files for London\r\nWards level - Ward is the primary unit of English electoral geography\r\nBorough level - Boroughs are local authority districts that make up the ceremonial county of Greater London, with each Borough divided into different wards.\r\nPopulation and housing density of Greater London at Borough level\r\n3.3 Importing of crime dataset into R\r\nThe dataset are in CSV format, hence read_csv() function of readr package was used to import the data for both past 24 months and historical ones.\r\n\r\n\r\ncrime_his = read_csv('data/MPS_Ward_Level_Crime_Historic_NewWard.csv')\r\n\r\n\r\nParsed with column specification:\r\ncols(\r\n  .default = col_double(),\r\n  WardCode = col_character(),\r\n  `Ward Name` = col_character(),\r\n  Borough = col_character(),\r\n  `Major Category` = col_character(),\r\n  `Minor Category` = col_character()\r\n)\r\nSee spec(...) for full column specifications.\r\n\r\ncrime_24mths = read_csv('data/MPS Ward Level Crime (most recent 24 months).csv')\r\n\r\n\r\nParsed with column specification:\r\ncols(\r\n  .default = col_double(),\r\n  MajorText = col_character(),\r\n  MinorText = col_character(),\r\n  WardName = col_character(),\r\n  WardCode = col_character(),\r\n  LookUp_BoroughName = col_character()\r\n)\r\nSee spec(...) for full column specifications.\r\n\r\n3.4 Understanding the crime data\r\nThe structure of the data was examined.\r\n3.5 Unpivoting crime dataset\r\nIt was observed that the data sets were presented in pivoted format whereby the month year of when the crime had took place are presented as individual columns. pivot_longer() function of tidyverse was used to “unpivot” the data. A new column “Month_Year” is created to account for the month of the crimes and this column is converted into date using as.Date() function. Other columns are renamed for easier reference and to be consistent between the 2 datasets.\r\n\r\n\r\ncrime_his_tab = crime_his %>%\r\n  pivot_longer(!c(`Major Category`,\r\n                  `Minor Category`,\r\n                  `Ward Name`,\r\n                  WardCode,\r\n                  Borough),\r\n                  names_to = 'Month_Year', values_to = 'Count') %>%\r\n          rename(`WardName` = `Ward Name`, \r\n         `Crime_Sub_Category` = `Minor Category`,\r\n         `Crime_Category` = `Major Category`,\r\n         `BoroughName` = `Borough`) %>%\r\n  mutate(Month_Year=as.Date(paste0(Month_Year,'01'), format=\"%Y%m%d\"))\r\n\r\ncrime_24mths_tab = crime_24mths %>%\r\n  pivot_longer(!c(MajorText,\r\n                  MinorText,\r\n                  WardName,\r\n                  WardCode,\r\n                  LookUp_BoroughName),\r\n                  names_to = 'Month_Year', values_to = 'Count') %>%\r\n          rename(`Crime_Sub_Category` = `MinorText`,\r\n         `Crime_Category` = `MajorText`,\r\n         `BoroughName` = `LookUp_BoroughName`) %>%\r\n  mutate(Month_Year=as.Date(paste0(Month_Year,'01'), format=\"%Y%m%d\"))\r\n\r\nglimpse(crime_his_tab)\r\n\r\n\r\nObservations: 2,113,230\r\nVariables: 7\r\n$ WardCode           <chr> \"E05000026\", \"E05000026\", \"E05000026\",...\r\n$ WardName           <chr> \"Abbey\", \"Abbey\", \"Abbey\", \"Abbey\", \"A...\r\n$ BoroughName        <chr> \"Barking and Dagenham\", \"Barking and D...\r\n$ Crime_Category     <chr> \"Burglary\", \"Burglary\", \"Burglary\", \"B...\r\n$ Crime_Sub_Category <chr> \"Burglary In A Dwelling\", \"Burglary In...\r\n$ Month_Year         <date> 2010-04-01, 2010-05-01, 2010-06-01, 2...\r\n$ Count              <dbl> 9, 4, 6, 6, 12, 5, 3, 11, 8, 8, 7, 4, ...\r\n\r\nglimpse(crime_24mths_tab)\r\n\r\n\r\nObservations: 537,840\r\nVariables: 7\r\n$ Crime_Category     <chr> \"Arson and Criminal Damage\", \"Arson an...\r\n$ Crime_Sub_Category <chr> \"Arson\", \"Arson\", \"Arson\", \"Arson\", \"A...\r\n$ WardName           <chr> \"Abbey\", \"Abbey\", \"Abbey\", \"Abbey\", \"A...\r\n$ WardCode           <chr> \"E05000026\", \"E05000026\", \"E05000026\",...\r\n$ BoroughName        <chr> \"Barking and Dagenham\", \"Barking and D...\r\n$ Month_Year         <date> 2019-01-01, 2019-02-01, 2019-03-01, 2...\r\n$ Count              <dbl> 1, 0, 1, 0, 1, 0, 0, 0, 0, 2, 2, 0, 0,...\r\n\r\n3.6 Comparison of datasets\r\nThe unique values of Borough and Ward-Code are studied between the historical and past 24 months crime datasets.It was observed that the names of borough was identical, but not for Ward level, there are 90 wards with different ward codes.\r\n\r\n\r\nsort(unique(crime_his_tab$BoroughName)) == sort(unique(crime_24mths_tab$BoroughName))\r\n\r\n\r\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\r\n[14] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\r\n[27] TRUE TRUE TRUE TRUE TRUE TRUE\r\n\r\ncompare = tibble(binary = sort(unique(crime_24mths_tab$WardCode)) \r\n                 %in%  sort(unique(crime_his_tab$WardCode)))\r\n\r\nnrow(filter(compare,binary ==FALSE))\r\n\r\n\r\n[1] 90\r\n\r\nFurther comparison was made between the historical and past 24 months crime datasets on the crime categories and it revealed that the crime categorization are and this may complicate study if the 2 datasets were to be appended together.\r\n\r\n\r\ncompare_crime = list(Hist = sort(unique(crime_his_tab$Crime_Category)),\r\n     Mths24 = sort(unique(crime_24mths_tab$Crime_Category)))\r\n\r\npaged_table(data.frame(lapply(compare_crime, \"length<-\", max(lengths(compare_crime)))))\r\n\r\n\r\n\r\n\r\n{\"columns\":[{\"label\":[\"Hist\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Mths24\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Burglary\",\"2\":\"Arson and Criminal Damage\"},{\"1\":\"Criminal Damage\",\"2\":\"Burglary\"},{\"1\":\"Drugs\",\"2\":\"Drug Offences\"},{\"1\":\"Fraud or Forgery\",\"2\":\"Miscellaneous Crimes Against Society\"},{\"1\":\"Other Notifiable Offences\",\"2\":\"Possession of Weapons\"},{\"1\":\"Robbery\",\"2\":\"Public Order Offences\"},{\"1\":\"Sexual Offences\",\"2\":\"Robbery\"},{\"1\":\"Theft and Handling\",\"2\":\"Sexual Offences\"},{\"1\":\"Violence Against The Person\",\"2\":\"Theft\"},{\"1\":\"NA\",\"2\":\"Vehicle Offences\"},{\"1\":\"NA\",\"2\":\"Violence Against the Person\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\r\n  \r\n\r\nIt was decided that only historical crime dataset will be used due to the incompatibility and the past 24 months data includes a blackswan event (Covid-19) in year 2020.\r\n3.7 Further analysis of data\r\nThe crime dataset was furthered studied using the summary() function and it verified that the earliest month-year was Apr 2010.\r\n\r\n\r\nsummary(crime_his_tab)\r\n\r\n\r\n   WardCode           WardName         BoroughName       \r\n Length:2113230     Length:2113230     Length:2113230    \r\n Class :character   Class :character   Class :character  \r\n Mode  :character   Mode  :character   Mode  :character  \r\n                                                         \r\n                                                         \r\n                                                         \r\n Crime_Category     Crime_Sub_Category   Month_Year        \r\n Length:2113230     Length:2113230     Min.   :2010-04-01  \r\n Class :character   Class :character   1st Qu.:2012-06-01  \r\n Mode  :character   Mode  :character   Median :2014-08-01  \r\n                                       Mean   :2014-08-01  \r\n                                       3rd Qu.:2016-10-01  \r\n                                       Max.   :2018-12-01  \r\n     Count        \r\n Min.   :  0.000  \r\n 1st Qu.:  0.000  \r\n Median :  1.000  \r\n Mean   :  3.099  \r\n 3rd Qu.:  4.000  \r\n Max.   :851.000  \r\n\r\n3.8 Transforming of data\r\nAn additional field “Year” was created to show the year of the crime and the data is filtered using filter() from dplyr package to take in only data from 2011 onward as the data from 2010 does not contain the full year data.\r\n\r\n\r\ncrime_his_tab = crime_his_tab %>%\r\n  mutate(Year = year(Month_Year)) %>%\r\n  filter(Year >= 2011)\r\n\r\n\r\n\r\nThe data is further summarized by year and ward level\r\n\r\n\r\ncrime_his_tab_ward = crime_his_tab %>%\r\n      group_by(WardName,WardCode, Year) %>%\r\n      summarize(Total_count = sum(Count)) %>%\r\n      pivot_wider(names_from = Year,\r\n                  values_from = Total_count)\r\n\r\n\r\n`summarise()` has grouped output by 'WardName', 'WardCode'. You can override using the `.groups` argument.\r\n\r\n4 Step-by-step Visualization and Analysis Preparation\r\n4.1 Reading of map\r\nreadOGR() function of rgdal package was used to read OGR vector maps into Spatial objects. st_read() is not used as we require the file to be read as sp for further analysis\r\nCity of London is not present in the crime dataset, hence it will be removed from the geospatial data using subset() function to ensure consistency during subsequent analysis.\r\nA total of 630 wards was read. A quick thematic map (QTM) using qtm() function from tmap package is plotted to verify the removal of City of London, which is shown as a blank space in the middle of Greater London.\r\n\r\n\r\nqtm(london)\r\n\r\n\r\n\r\n\r\n4.2 Joining of geospatial and crime data\r\nThe geospatial and the crime data (aspatial) will be combined into 1 data using the left_join() function of dplyr package.The geospatial data will be used as the based data object, while the crime data will be used as the join table. The join fields are “GSS_CODE” and “WardCode” from the respective data. Ward names are not used as they are not unique and could be the same in multiple boroughs. Hence, a new field, Ward-Borough, is created to allow easier differentiation of common ward names.\r\nTo simplify the study, all spatial analysis would only study crimes tht occurred in year 2018.\r\n\r\n\r\nlondon@data <- left_join(london@data,crime_his_tab_ward,\r\n                                  by = c(\"GSS_CODE\" = \"WardCode\")) %>%\r\n              mutate(Ward_Borough = paste(NAME,\"-\", BOROUGH))\r\n\r\nqtm(london, \"2018\")\r\n\r\n\r\n\r\n\r\n4.3 Exploring the style of presentation\r\nA quick exploration of the maps in different thematic styles were explored using tm_shape() function from tmap.\r\n\r\n\r\ntmap_mode(\"plot\")\r\n\r\n\r\ntmap mode set to plotting\r\n\r\nmap1 = tm_shape(london) + \r\n  tm_fill(\"2018\", style=\"equal\") +\r\n  tm_borders(alpha = 0.2) +\r\n  tm_layout(main.title = \"Equal\", main.title.size = 0.7 ,\r\n            legend.position = c(\"right\", \"bottom\"), legend.title.size = 0.8)\r\n\r\nmap2 = tm_shape(london) + \r\n  tm_fill(\"2018\",  style=\"jenks\") +\r\n  tm_borders(alpha = 0.2) +\r\n  tm_layout(main.title = \"Jenks\", main.title.size = 0.7 ,\r\n            legend.position = c(\"right\", \"bottom\"), legend.title.size = 0.8)\r\n\r\nmap3 = tm_shape(london) + \r\n  tm_fill(\"2018\", style=\"quantile\") +\r\n  tm_borders(alpha = 0.2) +\r\n  tm_layout(main.title = \"Quantile\", main.title.size = 0.7 ,\r\n            legend.position = c(\"right\", \"bottom\"), legend.title.size = 0.8)\r\n\r\nmap4 = tm_shape(london) + \r\n  tm_fill(\"2018\", style=\"fisher\") +\r\n  tm_borders(alpha = 0.2) +\r\n  tm_layout(main.title = \"Fisher\", main.title.size = 0.7 ,\r\n            legend.position = c(\"right\", \"bottom\"), legend.title.size = 0.8)\r\n\r\ntmap_arrange(map1,map2,map3,map4,outer.margins = 0, ncol = 2)\r\n\r\n\r\n\r\n\r\nAs pointed out in the literature review, tmap offers a wide range of configuration to visualize the geospatial data in different color schema. However, it is important to display the contrast of the colours with analytical values.\r\n4.4 Exploration of Local Indicators for Spatial Association (LISA)\r\n4.4.1 Creating list of neighbours\r\nThe list of neighbours of each Ward level polygons are identified using the poly2nb() function from spdep package. This package procides a collection of functions to create spatial weights matrix, building neighbour lists and tests for spatial ‘autocorrelation’,including global ‘Morans I’ and ‘Gearys C’\r\nA Queen contiguity matrix is first constructed. Queen would consider 2 polygons neighbours as long as a single shared boundary point meets the contiguity condition.\r\n\r\n\r\nwm_q <- poly2nb(london, queen=TRUE)\r\n\r\nsummary(wm_q)\r\n\r\n\r\nNeighbour list object:\r\nNumber of regions: 629 \r\nNumber of nonzero links: 3686 \r\nPercentage nonzero weights: 0.9316527 \r\nAverage number of links: 5.860095 \r\nLink number distribution:\r\n\r\n  1   2   3   4   5   6   7   8   9  10  11  12 \r\n  1   4  14  73 171 177 117  52  13   4   2   1 \r\n1 least connected region:\r\n0 with 1 link\r\n1 most connected region:\r\n134 with 12 links\r\n\r\nplot() function is used to visualize the resultant mapping of neighbours from using the Queen continuity matrix\r\n\r\n\r\nplot(london, border=\"grey\")\r\nplot(wm_q, coordinates(london), pch = 19, cex = 0.4, add = TRUE, col= \"#FB7080\")\r\n\r\n\r\n\r\n\r\n4.4.2 Row standardized weighted matrix\r\nRow standardized weighted matrix is the process of normalizing each row of the matrix and assigned weightage to address polygons that have unequal number of neighbours.\r\n\r\n\r\nrswm_q <- nb2listw(wm_q, zero.policy = TRUE)\r\nsummary(rswm_q)\r\n\r\n\r\nCharacteristics of weights list object:\r\nNeighbour list object:\r\nNumber of regions: 629 \r\nNumber of nonzero links: 3686 \r\nPercentage nonzero weights: 0.9316527 \r\nAverage number of links: 5.860095 \r\nLink number distribution:\r\n\r\n  1   2   3   4   5   6   7   8   9  10  11  12 \r\n  1   4  14  73 171 177 117  52  13   4   2   1 \r\n1 least connected region:\r\n0 with 1 link\r\n1 most connected region:\r\n134 with 12 links\r\n\r\nWeights style: W \r\nWeights constants summary:\r\n    n     nn  S0       S1       S2\r\nW 629 395641 629 222.8078 2562.136\r\n\r\n4.4.3 local Moran’s I statistics\r\nlocalmoran() function from spdep package calculates the local spatial statistic Moran’s I for each zone based on the spatial weights.\r\nIi: the local Moran’s I statistics E.Ii: the expectation of local Moran statistic Var.Ii: the variance of local Moran statistic Z.Ii:the standard deviate of local Moran statistic Pr(): the p-value of local Moran statistic\r\nThe Moran’s I was calculated and a few samples of the result is shown.\r\n\r\n\r\nfips <- order(london$Ward_Borough)\r\nlocalMI <- localmoran(london$`2018`, rswm_q)\r\n\r\n\r\n\r\nMapping local Moran’s I and p values values\r\n\r\n\r\nlondon.localMI <- cbind(london,localMI)\r\nlocalMI.map <- tm_shape(london.localMI) +\r\n  tm_fill(col = \"Ii\", \r\n          palette = \"YlOrRd\", \r\n          title = \"local moran statistics\") +\r\n  tm_borders(alpha = 0.5)\r\n\r\npvalue.map <- tm_shape(london.localMI) +\r\n  tm_fill(col = \"Pr.z...0.\", \r\n          breaks=c(-Inf, 0.001, 0.01, 0.05, 0.1, Inf),\r\n          palette=\"-Blues\", \r\n          title = \"local Moran's I p-values\") +\r\n  tm_borders(alpha = 0.5)\r\n\r\ntmap_arrange(localMI.map, pvalue.map, asp=1, ncol=2)\r\n\r\n\r\n\r\n\r\n4.4.4 Moran scatterplot with standardised variable\r\nThe Moran’s I scatterplot is plotted using standardized scale.\r\n\r\n\r\nlondon$Z.2018 <- scale(london$`2018`) %>% as.vector \r\nnci <- moran.plot(london$Z.2018, rswm_q, labels=as.character(london$Ward_Borough),\r\n                  xlab=\"z-crime 2018\", ylab=\"Spatially Lag z-crime 2018\")\r\n\r\n\r\n\r\n\r\n4.4.5 LISA Cluster map\r\nThe LISA cluster map would then created. 4 quadrants would be created based on the mean values of the crimes and the significance level is set at 5%.\r\n\r\n\r\nquadrant <- vector(mode=\"numeric\",length=nrow(localMI))\r\nC_Mean <- london$'2018' - mean(london$`2018`)\r\nC_mI <- localMI[,1] - mean(localMI[,1]) \r\nsignif <- 0.05    # 5% significance level\r\n\r\nquadrant[C_Mean <0 & C_mI<0] <- 1      \r\nquadrant[C_Mean <0 & C_mI>0] <- 2\r\nquadrant[C_Mean >0 & C_mI<0] <- 3\r\nquadrant[C_Mean >0 & C_mI>0] <- 4    \r\n\r\nquadrant[localMI[,5]>signif] <- 0\r\n\r\n\r\n\r\n\r\n\r\nlondon.localMI$quadrant <- quadrant\r\ncolors <- c(\"#ffffff\", \"cornflowerblue\", \"cyan1\", \"chocolate1\", \"firebrick\")\r\nclusters <- c(\"insignificant\", \"low-low\", \"low-high\", \"high-low\", \"high-high\")\r\n\r\ntm_shape(london.localMI) +\r\n  tm_fill(col = \"quadrant\", style = \"cat\", \r\n          palette = colors[c(sort(unique(quadrant)))+1], \r\n          labels = clusters[c(sort(unique(quadrant)))+1], \r\n          popup.vars = c(\"Postal.Code\")) +\r\n  tm_view(set.zoom.limits = c(11,17)) +\r\n  tm_borders(alpha=0.5)\r\n\r\n\r\n\r\n\r\n4.5 Hot Spot and Cold Spot Area Analysis\r\n4.5.1 Findng neighbours\r\nStatistically significant hot-spots and cold-spots could be mapped by looking at neighbours within a defined proximity. This analysis is performed using High/Low Clustering (Getis-Ord General G).\r\ndnearneigh() function from spdep is used to identify neighbours of region points by Euclidean distance between lower and upper bounds. The specific distance was used to ensure all objects have at least 1 link. As the data is not in kilometres scale, longlat is turned off.\r\n\r\n\r\ndnb <- dnearneigh(coordinates(london), 0,2940, longlat = NULL)\r\ndnb\r\n\r\n\r\nNeighbour list object:\r\nNumber of regions: 629 \r\nNumber of nonzero links: 8624 \r\nPercentage nonzero weights: 2.179754 \r\nAverage number of links: 13.71065 \r\n\r\nThe resultant neighbour plot is as shown below.\r\n\r\n\r\nplot(london, border = 'lightgrey')\r\nplot(dnb, coordinates(london), pch = 19, cex = 0.4, add = TRUE, col= \"#FB7080\")\r\n\r\n\r\n\r\n\r\nA listw type spatial weights object is created using nb2listw() function from spdep and a basic binary distance weights is applied.\r\n\r\n\r\ndnb_lw <- nb2listw(dnb, style = 'B')\r\nsummary(dnb_lw)\r\n\r\n\r\nCharacteristics of weights list object:\r\nNeighbour list object:\r\nNumber of regions: 629 \r\nNumber of nonzero links: 8624 \r\nPercentage nonzero weights: 2.179754 \r\nAverage number of links: 13.71065 \r\nLink number distribution:\r\n\r\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \r\n 9 11 13 21 16 26 31 37 38 54 48 33 22 25 22 24 13 22 16 19 20 16 15 \r\n24 25 26 27 28 29 30 31 32 33 34 \r\n 8 13  9 13 10  7  8  3  3  3  1 \r\n9 least connected regions:\r\n1 41 44 45 106 107 124 125 356 with 1 link\r\n1 most connected region:\r\n477 with 34 links\r\n\r\nWeights style: B \r\nWeights constants summary:\r\n    n     nn   S0    S1     S2\r\nB 629 395641 8624 17248 611352\r\n\r\nAdaptive distance method can also be used to derived the proximity matrix\r\n\r\n\r\ncoords <- coordinates(london)\r\nknb <- knn2nb(knearneigh(coords, k=5, longlat = NULL), \r\n              row.names=row.names(london$`2018`))\r\nknb_lw <- nb2listw(knb, style = 'B')\r\nsummary(knb_lw)\r\n\r\n\r\nCharacteristics of weights list object:\r\nNeighbour list object:\r\nNumber of regions: 629 \r\nNumber of nonzero links: 3145 \r\nPercentage nonzero weights: 0.7949126 \r\nAverage number of links: 5 \r\nNon-symmetric neighbours list\r\nLink number distribution:\r\n\r\n  5 \r\n629 \r\n629 least connected regions:\r\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 with 5 links\r\n629 most connected regions:\r\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 with 5 links\r\n\r\nWeights style: B \r\nWeights constants summary:\r\n    n     nn   S0   S1    S2\r\nB 629 395641 3145 5773 63952\r\n\r\nThe resultant plot is as follows.\r\n\r\n\r\nplot(london, border=\"lightgrey\")\r\nplot(knb, coordinates(london), pch = 19, cex = 0.4, add = TRUE, col= \"#FB7080\")\r\n\r\n\r\n\r\n\r\n4.5.2 Mapping Gi values with fixed distance and adaptive distance weights\r\nGi values,represented as a Z-score, is calculated using both fixed and adaptive distance matrix methods. Both methods are used to compare the difference in the result. localG() function from spdep is used used to calculate the Gi values.\r\nFixed distance weight\r\n\r\n\r\nfips <- order(london$Ward_Borough)\r\ngi.fixed <- localG(london$`2018`, dnb_lw)\r\n\r\nlondon.gi_f <- cbind(london, as.matrix(gi.fixed))\r\nnames(london.gi_f)[19] <- \"gstat\"\r\n\r\n\r\n\r\nAdaptive distance weight\r\nThe difference between the 2 different distance weight can be shown clearly when the map object is plotted.\r\n\r\n\r\ngi_map_a = tm_shape(london.gi_a) +\r\n          tm_fill(col = \"gstat_adaptive\",\r\n          style = \"pretty\",\r\n          palette = \"-RdBu\",\r\n          title = \"local Gi\") +\r\n          tm_borders(alpha = 0.5)+\r\n          tm_layout(main.title = \"gi adaptive distance weights\", main.title.size = 1)\r\n\r\ngi_map_f =tm_shape(london.gi_f) +\r\n          tm_fill(col = \"gstat\", \r\n          style = \"pretty\",\r\n          palette=\"-RdBu\",\r\n          title = \"local Gi\") +\r\n          tm_borders(alpha = 0.5)+\r\n          tm_layout(main.title = \"gi fixed distance weights\", main.title.size = 1 )\r\n\r\ntmap_arrange(gi_map_a, gi_map_f, asp=1, ncol=2)\r\n\r\n\r\n\r\n\r\n5 Applying on Borough level\r\nThe analysis had focused on Ward level, now similar approach is applied for Borough level data for comparison. There is available information on population at borough level and Since crime rate is often used in the form of crime per 100,000 population, the borough level data would present in terms of crime rate and there would remove any misrepresentation of data due to population factor (i.e. larger population is likely to have higher crime). Hence, differences between Ward and Borough visualization is expected.\r\nThe dataset is different and for simplicity, the data would focus on year 2018 data for this analysis.\r\nqtm() is used to give a quick view of crime rate at borough level and total crimes at Ward level for year 2018.\r\n\r\n\r\nlondon_b <- readOGR(dsn = \"Data/London-wards-2018_ESRI\", \r\n                layer = \"London_Borough_Excluding_MHW\") %>%\r\n              subset(NAME !=\"City of London\")\r\n\r\ncrime_his_b = read_csv('data/MPS_Borough_Level_Crime_Historic.csv')\r\npop = read_csv('data/housing-density-borough.csv')\r\n\r\n\r\n\r\n\r\n\r\ncrime_his_tab_b = crime_his_b %>%\r\n  pivot_longer(!c(`Borough`,\r\n                  `Major Category`,\r\n                  `Minor Category`),\r\n                  names_to = 'Month_Year', values_to = 'Count') %>%\r\n  rename(`Crime_Sub_Category` = `Minor Category`,\r\n         `Crime_Category` = `Major Category`,\r\n         `BoroughName` = `Borough`) %>%\r\n  mutate(Month_Year=as.Date(paste0(Month_Year,'01'), format=\"%Y%m%d\")) %>%\r\n  mutate(Year = year(Month_Year)) %>%\r\n  filter(Year == 2018) %>%\r\n    group_by(BoroughName, Year) %>%\r\n    summarize(Total_count = sum(Count)) \r\n\r\ncrime_his_tab_b =  left_join(crime_his_tab_b,pop, by = c(\"BoroughName\" = \"Name\",\"Year\" = \"Year\")) %>%\r\n                   mutate(Crime_rate = (Total_count / Population*100000))\r\n\r\nlondon_b@data <- left_join(london_b@data,crime_his_tab_b,\r\n                                  by = c(\"NAME\" = \"BoroughName\")) \r\n\r\ntmap_mode(\"plot\")\r\ntmap_arrange(qtm(london, \"2018\", fill.title = \"Crimes at Ward level, 2018\")\r\n             , qtm(london_b, \"Crime_rate\", fill.title = \"Crime rate at Borough level, 2018\") ,\r\n             asp=1, ncol=2)\r\n\r\n\r\n\r\n\r\nIt is observed that the polygons of the Borough across River Thames are not connected and this may post implications as we calculate the neighours.\r\nAs expected the Borough are not able to find the nearest neighbours due to the separation at the river.\r\n\r\n\r\n\r\nSnap can be adjusted to address this issue on a best effort basis.\r\n\r\n\r\nwm_q_b <- poly2nb(london_b, snap = 500, row.names = london_b$NAME, queen=TRUE)\r\nsummary(wm_q_b)\r\n\r\n\r\nNeighbour list object:\r\nNumber of regions: 32 \r\nNumber of nonzero links: 152 \r\nPercentage nonzero weights: 14.84375 \r\nAverage number of links: 4.75 \r\nLink number distribution:\r\n\r\n2 3 4 5 6 7 \r\n2 3 9 7 9 2 \r\n2 least connected regions:\r\nHavering Bexley with 2 links\r\n2 most connected regions:\r\nBrent Wandsworth with 7 links\r\n\r\n\r\n\r\n\r\nThe corresponding mapping local Moran’s I values are as shown below\r\n\r\n\r\n\r\nPlotting Moran scatterplot\r\n\r\n\r\n\r\nPreparation of LISA cluster map\r\n\r\n\r\n\r\n\r\ntmap mode set to plotting\r\n\r\n\r\nHot Spot and Cold Spot Area Analysis\r\n\r\n\r\n\r\n\r\n\r\n\r\n6. Plotting of time series with seasonal decomposition\r\nA The seasonality of the crime data could be analysed using ggsdc() function of ggseas package. This function is able to display the data into different composition for easier understanding.\r\n\r\n\r\n\r\n\r\n\r\ntime_viz = ggsdc(crime_his_tab_b_time, aes(x = x, y = Total_count)\r\n          , method = \"seas\", start = c(2011, 1), frequency = 12,\r\n          facet.titles = c(\"The original series\", \r\n                       \"The underlying trend\", \r\n                       \"Regular seasonal patterns\", \r\n                       \"All the randomness left\")) +\r\n          geom_line() +\r\n          labs(x = 'Date', y = \"Crimes In London\") \r\n\r\ntime_viz\r\n\r\n\r\n\r\n\r\n7. Finalized visualization\r\n\r\n\r\n\r\n8. Conclusion & insights\r\nData exploration and cleaning is essential prior to the visualization.\r\nThe visualization reveals that the certain area within London tends to have higher crime rate and there is a seasonal trend in crimes. Local Moran’s I is able to identify clusters and outliers, while Gi statistics are able to detect the cold and hot spots of crimes.It is important to include underlying analysis method such that the color contrast shown on the visualized map is meaningful.\r\nWestminster, a Borough in central London is observed to have comparatively high crime rate compared to the rest of hte metropolitan. Further analysis could be done in the future to understand what factors could have contribute to its high crime rate.\r\n9. Reference\r\nIS415 Hands-on Exercise 7: Spatial Clustering of Geographically Referenced Attribute, Kam Tin Seong, 2019, https://www.rpubs.com/tskam/IS415-Hands-on_Ex07\r\nGlobal and local spatial autocorrelation, Juanjo Medina and Reka Solymosi, 2019, https://maczokni.github.io/crimemapping_textbook_bookdown/global-and-local-spatial-autocorrelation.html\r\nggseas V0.5.4 R package, Peter Ellis, https://cran.r-project.org/web/packages/ggseas/ggseas.pdf\r\ntmap: Thematic Maps in R, Martijn Tennekes, 2018, https://ij-healthgeographics.biomedcentral.com/articles/10.1186/1476-072X-8-36, https://www.jstatsoft.org/article/view/v084i06/v84i06.pdf\r\nNakarin Chaikaew, Nitin K Tripathi & Marc Souris, Exploring spatial patterns and hotspots of diarrhea in Chiang Mai, Thailand, International Journal of Health Geographics, 24 June 2009, https://ij-healthgeographics.biomedcentral.com/articles/10.1186/1476-072X-8-36\r\n\r\n\r\n\r\n",
    "preview": "posts/Project_Assignment/Project_assignment_files/figure-html5/unnamed-chunk-11-1.png",
    "last_modified": "2021-04-11T20:34:29+08:00",
    "input_file": "Project_assignment.utf8.md"
  },
  {
    "path": "posts/dataviz3/",
    "title": "DataViz Makeover 3",
    "description": "South East Asia Armed Conflict Anaylsis",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-03-20",
    "categories": [],
    "contents": "\r\n\r\nimg {\r\n    max-width: none;\r\n\r\n    /* other options:\r\n    max-width: 1200px;\r\n    */\r\n}\r\nData Visualisation Link (Tableau Public) - https://public.tableau.com/profile/tan.huiyong#!/vizhome/ArmedConflictSEA/ArmConflictSEA?publish=yes\r\nContents\r\nCritiques and Suggestions for Current Visualisations\r\nProposed alternative data visualisation\r\nProposed alternative data visualisation\r\nStep-by-step description of visualization\r\n5 Observations from Final Visualization\r\na. Critiques and Suggestions for Current Visualisations\r\nBack to top \r\nClarity\r\nDuring the data exploration, it was observed that multiple events / event types could have occurred at the same location over time. The visualization of interest uses geospatial dot plot to depict the incidents, but it does not utilize size or tooltip to indicate the number of events or fatalities. The visualization could have been amended such that the number of incidents could be observed based on the size of the dot and/or tooltip.\r\nThe scale of the line charts do not start at zero. This can be misleading when the visualization is used to show the number of incidents. As shown in the image below, it can be visually misleading that the number of “Battles” is quite low at certain point of time as it is almost at the bottom of the scale. However, this is not the case as the number of “battles” are around 400 at the bottom of the scale. The scale can be changed such that the bottom of the scale starts from zero.\r\n\r\nAesthetics\r\nAxis labels, “counts of sheet1”, are not properly named. This label is not only redundant but also make the visualization aesthetically unpleasant due to the fact the choice of words is inappropriate. The axis label can be removed as it is relatively easy for the user to infer that the y-axis of the line charts refers to the number of incidents that has taken place.\r\nA single color was applied onto the lines for all event types in the line charts, while the geospatial dot plot utilized colors to differentiate each of the event type. This is a form of inconsistency in the visualization. The line charts could adopt the same color scheme as the geospatial dot plot.\r\nIt was observed that some of the countries like Vietnam does have “Battles” occurring in some the years. These null values result in broken line charts as shown below. Cosmetic procedures should have been applied to ensure that the line charts are not broken. One of the ways to correct this is to replace the null values with 0.\r\n\r\nCountries like Laos have low number of incidents of interest and this makes it difficult for user to see the boundary of the countries. The visualization could be improved if the boundary of the countries is clearly shown.\r\n\r\nInteractivity\r\nThe visualization does not provide an easy method to toggle the date level (showing in years, quarter, etc). This impairs user who need to analyze the dates of the incidents. Interactive parameters or buttons could be added to allow easy toggle of the dates.\r\nFixed date filter was pre-applied onto the visualization, which limits the period the user could toggle with.\r\nThe visualization has limited interactivity with only toggling of country filter and highlighting plot points of the same event types. More interactivity could be added.\r\nb. Proposed alternative data visualisation\r\nBack to top\r\nProposed VisualizationAlternative design\r\nThe proposed makeover would consist of 3 charts (1 choropleth map overlay geospatial dot plot, 1 stacked line charts with vertical separation and 1 line chart with dynamic date slider and filter), 1 panel of text display showing key summary statistics and 1 sidebar showing the legends and filters.\r\nAdvantages\r\nChoropleth Map\r\nThe choropleth map would show clear international boundaries of each country within South East Asia and the default map would show the whole region of South East Asia.\r\nHeat map is applied onto the chart to allow the user to have a gauge of the relative number of incidents occurring amongst the country.\r\nThe incidents provided by the data source are about armed conflicts, which are considered as negative events. Hence, the visualization would be using dark map team to give an atmosphere of “dark” events occurring in South East Asia.\r\nThe geospatial dot plot would be retained with event types differentiated by colors. The key improvement from the initial visualization is that the size of the dot plots is determined by the number of events within any given time frame.\r\nTooltip of the dot plot will show the total fatalities for the incidents taken place at that location.\r\nTooltip of the choropleth map will show a cross tab of total fatalities and events of each event type in each country.\r\nStacked Line Charts with vertical separation\r\nThe colors of each line would be consistent to those in the geospatial dot plot. This will show consistencies.\r\nThe tooltip over the line charts would show the brief description of each event types, the counts of incidents and fatalities at that point of time.\r\nCalculated fields would be used to ensure null values are replaced with 0 to avoid any breakage of the line charts.\r\nInteractivity is improved with the level of date granularity customizable with either a radio button or drop-down list.\r\nThe scale of the line charts is dynamic, with the bottom scale set at zero.\r\nThe axes labels are removed as it is redundant.\r\nLine Chart with Dynamic Date Slider and Filter\r\nThis is a new chart not found in the original visualization. The main purpose of it is to increase the interactivity such that users can scroll on a line chart showing the number of incidents over time.\r\nUsers are also able to toggle the period of interest (date filter).\r\nText Display with Key Summary Statistics\r\nThis portion would show the user key figures like total fatalities and the total incidents per event type in any given time-frame. This would provide a clear and concise information with one glance.\r\nLegends & Filters\r\nThe legends and filters are placed to increase the interactivity.\r\nc. Proposed alternative data visualisation\r\nBack to top\r\nLink to Tableau Public\r\n\r\nd. Step-by-step description of visualization\r\nBack to top\r\nData Cleaning and exploration\r\nPrior to visualization, the data in Ms Excel format was studied extensively and was referenced against the data code book provided by ACLED. The data dictionary extracted from the codebook is listed below for easy reference.\r\n\r\nCodebook extract from ACLEDThe data was imported into tableau and it was observed that Tableau had inserted the wrong metadata type for some the fields. Therefore, the metadata of the fields are changed based on the nature of the data.\r\nChanges on MetadataNext, fields that are of no interest in the visualization will be hidden for neater working environment.\r\n\r\nLine Chart with Dynamic Date Slider and Filter\r\nOpen a new worksheet. The line chart would first be plotted.[Event Date] and [sheet1(count)] are placed onto the “Columns” and “Rows” respectively to generate the line chart.\r\nThe [Event Date] is converted into “Continuous” and toggled to monthly level. This would result in a line chart that depicts values at monthly level.\r\nLine chart created initiallyThe horizontal axis of the chart is fixed based on the min/max date so that the axis would not be truncated by any date filter.\r\nFixing of horizontal axisTo turn it into a slider, a parameter and some calculated fields had to be included.\r\nThe parameter, [Date Slider], would determine the period of interest and it would be a date data type taking date values from [Event Date].\r\nCreating parameter for date sliderNext, another parameter [Zoom to (months)] would be made. This would allow user to select a predetermined length of period (months, years level) for neater analysis. The settings are shown below.\r\n 2 calculated fields are made and they would determine the lower and upper bound off the period of interest.\r\nFormulae for lower and upper boundIt is important to convert the 2 calculated fields to continuous.\r\nConverting to continuousDrag [Lower zoom date] and [Upper zoom date] into “details” of “Marks” and toggle to month level.\r\nSetting to monthly levelWith the required fields ready, the “window” of the period of interest could be displayed on the line graph by inserting 2 vertical reference lines.\r\nAdding reference line to the x-axisThe first reference line would be the lower bound and it would take the form of a band to allow shading of the area in the line chart to differentiate the area of interest from the one that is not. The setting can be found in the screenshot below.\r\nSetting of lower bound reference lineThe second reference line would be the upper bound. Similarly, it would take the form of a band, with a slightly different setting to toggle the shading accordingly. The setting can be found in the screenshot below.\r\n The result of the slider worksheet is a line chart with dynamic band which has adjustable width and the band can be shifted by selection of of date of interest.\r\nSlider worksheetThe aesthetics of the chart would be touched up later when we build the dashboard as the color scheme and style must be consistent.\r\nStacked Line Charts with vertical separation\r\nA new worksheet is opened and a simple stacked line charts with vertical separation is constructed. This was done by placing [Event Date] into columns while [Event Type] and [sheet1(count)] are placed into rows. The [Event Type] is also placed into “Color” of the “Marks” to provide each event type a unique color.\r\nSimple Stacked Line Charts with vertical separationThe vertical axis label is removed, and the range is set to be independent range for each row, and it would include zero values.\r\nSetting y-axis to be independent of rows and include zeroThe changes would result in a cleaner look of the chart.\r\nCleaner Stacked Line Charts with vertical separationTo make the visualization more dynamic and interactive, the tick marks horizontal axis must become more dynamic. This can be achieved by using parameter and calculated fields.\r\nThe parameter would provide a list of date level for user to toggle, ranging from day to year level.\r\nParamter setting to toggle date granularityThe following calculated field, [Event Date Dynamic] is inserted to utilize the parameter to toggle the date granularity. [Event Date Dynamic] is then set as continuous date at exact date level.\r\nCalculated field for Event Date DynamicSetting field to be continuous exact date[Event Date (ref)] was added to the filter and it is filtered by conditions to show the date of interest as toggled by user.\r\nFilter seetting for event dateIt was observed that some configuration would result in broken line charts due to null values and missing data.\r\nBroken line chart observedData with missing datesAs such, an additional reference table, “Ref_Table_Date_Event_Type”, consisting of date ranging from the minimum and maximum of [Event Date] and all [Event Type] is made.\r\nA right join to the reference table is made on both [Event Date] and [Event Type]. This would ensure that each event date for each event type would occur.\r\nJoining of data with reference tableAn additional calculated field is required to count the occurrence of events accurately.\r\nThe calculated field has the following settings and it would replace [sheet1(count)] in the “Rows”.\r\nFormula for CountThe calculated fields from earlier had to be edited to replace [Event Date] with [Event Date (ref)].\r\nFormula for Event Date DynamicThe date filter had to change to [Event Date (ref)] as well to ensure consistency\r\nFilter seetting for event date (ref)The amendment would result in complete line charts for all configurations\r\nBroken line charts fixedA reference table that indicates the definition of each event type is created with reference to the ACLED codebook. This reference table would be brought into the tooltip such that the data tooltip would include the definition of the event type.\r\nEvent type & its decriptionThis table would be joined to the main data source based on the following conditions.\r\nEvent type & its decriptionBoth [Event Description] and [General] were placed into the tooltip of the line chart and the tooltip settings is configured.\r\nTooltip of the line chart amended\r\nChoropleth Map\r\nA new sheet is created.The [Longitude (generated) and [Latitude (generated)] are placed into “Columns” and Rows” respectively. [Country] was placed into the “Details” of the “Marks” and “Map” was selected as the type of chart displayed. A choropleth map of South East Asia will appear as shown.\r\nChoropleth mapDue to the joining of the original data with the date/event type reference table, 1 unknown (null value) would appear. This indicator will be kept for now. It is of interest to create a dot plot on the map, hence, another instance of [Latitude (generated)] was placed onto “Rows”. However, this time, circle” mark was selected instead. This would result in another map being generated showing dots on the countries of interest.\r\nChoropleth map and dot plot[Latitude] and [Longitude] were placed into “Details” of the “Marks”. They are both converted to “Dimension” to generate the dot plot based on the exact locations of events that took place.\r\nPopulating dot plot by coordinate positionsThe purpose of the choropleth map is not only to show the clear boundaries of countries, but also show the relative number of events using heat map. Hence, [Count] was placed onto the “color” of the mark. On the other hand, the dot plot would be showing the different types of events that took place, so [Event type] was placed into the “Color” while the size is toggled to be smaller so that it is more appealing to the eyes.\r\nResult of setting color by event typeThe two charts are combined by selecting “Dual Axis” in the rows option.\r\nSetting of dual axis to combine the 2 plotsResult of dual axis[Count] is placed into the size of the dot plot so that locations that had more events would look bigger.\r\nSetting the size based on countsThe theme of the map was changed to “Dark” and the colors of both choropleth and the dot plots are changed accordingly. “Null” was also hidden in the legends. [Fatalities] was then placed into the tooltip.\r\nChanging the map theme to “Dark”[Country] was added to the “Filters” card. The filter was tested by selecting Laos in the [Country] filter list. The filter will result in the map zooming onto Laos. Unfortunately, the color of the country had changed from pale orange to deep red as the color blend changed dynamically according to the filter.\r\nIssue of color chaning due to filterAs such, the color blend had to be fixed at the start and end such that the filter of country would not result in changing in color.\r\nSetting fixed color based on countsThe color is solvedUnfortunately, setting a fixed value for the color has its shortcoming as the next step is to add a parameter to allow user to dynamically switch the choropleth from “No. of events” to “fatality” or even “fatality rate”; “No. of events” and “fatality” have different range and fixing it will cause a misrepresentation of the colors.\r\nNonetheless, the parameter to toggle between different statistic of interest has the following settings.\r\nParameter setting for statistics selectionAn accompanying calculated field is used to allow user to toggle the statistics.\r\nParameter setting for statistics selectionSame [Event Date (ref)] filter will be applied to this worksheet so that the visualization would change accordingly based on the selection in the Slider.\r\nFilter setting on Event Date (Ref)Further interactivity will be created at dashboard level.\r\n[Lower zoom date] and [Upper zoom date] are both added to the “Details” in the “Marks” such that the title of the chart could reflect according to the period of interest.\r\nAdding the the zoom period into the card[Country] is added to label to allow clearer indication of the countries shown on the map.\r\nWorksheet after the changesA worksheet , consisting of cross tab information on the number of events and fatalities for each event type is created. This worksheet would be used as the tooltip for the choropleth map so that user would be able to see more details of events and fatalities when they hover the countries of interest.\r\nWorksheet that serves as tooltip for choropleth mapThereafter, the “Tooltip” of the map worksheet is configured as below.\r\nTooltip settings for choropleth mapOne example can be seen below.\r\nTooltip result for choropleth mapTextbox\r\n3 additional worksheets [Text Box], [Text Box 2] and [Text Box 3] will be built to show the summary figures of total events, total fatalities, and fatality rate. A calculated field had to be created to show fatality rate.\r\nSetting for Fatalities text boxSetting for No. of events text boxSetting for Fatality rate text boxCalculatedfiledto calculate fatality rateDashboard\r\nA new dashboard, “Arm Conflict SEA”, is created. The size is set as “Automatic”.\r\nSetting of the dashboardMap, Date Slider and the stacked line chart worksheets are dragged into the canvas in the following arrangement.\r\nInitial look of the dashboard after placing the 3 worksheetsThe title and readout of Slider is removed, and the slider filter is place below the Slider worksheet. The tile and axes labels Slider are removed and a text box “Monthly Event Counts” is placed on the left of the slider to display the axis in horizontal orientation.\r\nCosmetic amendments on the date sliderNext the color theme of the dashboard is then set according to the theme used in the Map worksheet. The side panel would be arranged.\r\nColor theme changed accordinglyUnknown indicators due to joining of reference table would be hidden.\r\nHiding unknown indicator caused by joining reference tableIt is noted that the filter panel for country will have null value. This must be removed by using parameter as filter.\r\nNULL option appearing in filterA new parameter is created with setting shown below.\r\nSetting of parameter to replace country filterThe country filter would then be based on the following condition which would filter the country selected in the parameter. If “All” is selected, it will trigger TRUE for all conditions, hence displaying all countries.\r\nThe filter setting of country is changedA dynamic vertical reference line is added to line chart such that use could select any date on the line chart and the reference line will move to it. This is first done by constructing a date parameter with the following setting.\r\nParemter for dynamic vertical reference lineNext a reference line is created on the line chart.\r\nReference line settingsTo make the reference line dynamic, a “Change Parameter” action is created. This action would point to the dashboard and allow the Ref Line Dynamic parameter to change based on the date selection on the line chart.\r\nSetting “Change Paramters” actionThe resulting reference line would be dynamic and could shift as user click on different parts of the line chart.\r\nMving reference lineNow, the dashboard is equipped with more interactivity\r\nDashboard after interactivity addedIt is noted that the title of the visualization is taken from Map worksheet. To make the title on the top center of the dashboard, the title must be made as a separate worksheet to retain its dynamic words that change according to user’s selection during the interaction. The purpose of this worksheet is to obtain the title and its content is not important. Hence, a dummy field had to be created to show blank values in the worksheet.\r\nDummy field for title worksheetThe setting of the worksheet is as shown.\r\nSetting of the title worksheetThe titleThis Title worksheet is then placed at the top center of the dashboard and the original title of Map is hidden away.\r\nNext, the stacked line chart is given another change.a Dual axis with synchronized axis is created with [sum(fatalities)]. The fatalities is show in area chart with light color tone than that of the event\r\nSettings to insert are graph to show fatalitiesTo make the slider to be more consistent with the rest of the visualization, an area graph showing fatality is added and the color of the charts are changed to white to avoid having the same color as the stacked line chart.\r\nThe setting of the slider can be seen here.\r\nFatality area chart added to the slider and te color was changed to whiteIt is ensured that the filters selected on the dashboard of one worksheet will be reflected to the rest.\r\nA filter action is required as selection of the country on the map would not result in a filter of the data. The setting of the action is shown below. With this action, any selection of country on the map will filter the data accordingly across the dashboard and any release of it will un-filter.\r\nSetting of action filterWith all of the changes made, the final dashboard is completed.\r\nFinal Dashboarde. 5 Observations from Final Visualization\r\nBack to top\r\nDeadliest Year\r\nDeadliest yearThe deadliest year occurred in 2017 with 5,496 fatalities recorded. This is mainly due to 2 separate events occurring in Myanmar and Philippines. In Aug 2017, the Myanmar government began crackdown on Rohingya population in retaliation to the attacks carried out by Rohingya insurgents (National Geographic). Meanwhile, Philippines experienced one of the deadliest crisis when parts of the Marawi city was occupied by extremist militants and the governmental troops retook it after a 5 month long seige (Aljazeera).\r\nLowest Fatality from 2015- 2020 - Vietnam\r\nVietnamVietnam recorded the lowest number of fatality and fatality rate among the countries listed in the visualization. From the perspective of the ACLED, Vietnam might be one of the safest country among the countries listed in the visualization.\r\nArmed conflict events are on the rise in South East Asia region\r\nRising number of armed conflictsThere is a upwards trend for the number of events being recorded in the South East Asia region over the years. While the fatality rate is relatively low, the fact that the number is on the rise can be a concern as this can be a sign of destabilization of the region. Hence, there is a greater need for the ASEAN leaders to work toegether to safeguard the stability of the region.\r\nMyanmar and Philippines with the highest fatality in the region\r\n\r\nMyanmar and Philippines have have the highest number of fatalities and armed conflict events over the years and this is due to various internal issues the countries are facing. Hence, regional leaders may offer to do more to aid these 2 countries to ensure stability of the region.\r\nConflict zones that have violent events often take place at border region or region further away from central authority\r\nViolent events in South East AsiaViolent events such as battles and explosions often take place at border region or region further away from central authority. This is expected as the border regions can be a safe haven for insurgents. Hence, cross border cooperations may be needed to contain or eliminate such violent events.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-03-21T14:38:01+08:00",
    "input_file": "DataViz3.utf8.md"
  },
  {
    "path": "posts/dataviz2/",
    "title": "DataViz Makeover 2",
    "description": "Sentiments of Covid-19 Vaccinations",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-02-19",
    "categories": [],
    "contents": "\r\n\r\nimg {\r\n    max-width: none;\r\n\r\n    /* other options:\r\n    max-width: 1200px;\r\n    */\r\n}\r\nData Visualisation Link (Tableau Public) - https://public.tableau.com/views/dataviz2Covid-19VaccinationSentiments/Dashboard4\r\na. Critiques and Suggestions for Current Visualisations\r\n\r\n\r\n\r\nClarity\r\nThe Likert scale in the original are presented as stacked horizontal bars, aligning to the left of the chart. It is not visually clear to differentiate the survey results of each country as all of the categories have a common starting and ending points.\r\nThe Likert scale on the left is sorted by country alphabetical order, while the right chart is sorted by “% strongly agreed”. This can be quite confusing for viewers as they must manually map match the countries on the chart on the right to the one on the left.The visualizations could have consistent sorting order.\r\n“% of strongly agreed to vaccination” is plotted using horizontal bar graph. This is not appropriate as the uncertainty of the proportion is not accounted for. A dot graph with error bars could be used instead to depict the uncertainties clearly.\r\nAesthetics\r\nThe Likert scale’s horizontal axis tick marks are rounded to 0 decimal place while the chart on the right is 1 decimal point. This is visually inconsistent. This inconsistency should be standardized such that both charts are using the same decimal points for the horizontal axes.\r\nThe color scheme of the bars in the charts used does not match the degree of the responses. For example, the charts use red to represent “neutral” response even though it is usually associated as negative / more severe. Therefore, 2 colored scales (shades of red for disagreements and blue for agreements) could be employed.\r\nThe title of the legend box is displayed as “Vac 1”, which does not reveal the context of the legends. A more meaningful legend title could be used.\r\nThe legends are too far away from its chart, making it more tedious for viewers to understand the representations of each color.\r\nb. Proposed alternative data visualisation\r\n\r\n\r\n\r\nAlternative design\r\nThe alternative design is an interactive visualization. It uses Gantt chart to visualize the survey result and utilized dot graph with error bars (confidence interval) to show the optimism of the survey takers. This visualization assumes normal distribution for the population.\r\nThe interactivity allows users to toggle different parameters (age, country, gender, household size, etc) and sorting. This would allow insights to be discovered. The dashboard also allows user to select a secondary parameter for 2-dimensional assessment. The dashboard also allow viewer to perform a dynamic age bin for more insights.\r\nAdvantages\r\nGantt chart is clear, effective and can show a large chunk of data neatly and succinctly. As a result, it can show sentiments of groups taking the survey with positive sentiments on Covid-19 vaccine to be positioned more to the right, vice-versa.\r\nThe visualization would make use of parameters ensure that the sorting of both charts is consistent such that both charts would be showing the categories in the same order. This aims to ensure clarity as user toggle the dashboard.\r\nThe visualizations utilize color scales of red and blue to show the degree of agreement / disagreement. It provides more intuitive colors to the viewer.\r\nDot graph with error bars is adopted as it shows the underlying statistical confidence interval. This is crucial as the survey is taken by a sample population and statistical uncertainty is expected.\r\nThe x-axis of both charts is rounded to the nearest percent for aesthetic consistency.\r\nThe legends are visualization titles are chosen meaningfully and they would be able to let viewers understand the context of the dashboard. The order of the chart is as such to allow the Likert chart to be closer to the legend box. This would allow viewers to refer to the legend easily.\r\nc. Proposed alternative data visualisation\r\nLink to Tableau Public\r\nd. Step-by-step description of visualization\r\nData Cleaning and exploration\r\nThe data for the visualization was retrieved from Imperial College London YouGov Covid 19 Behaviour Tracker Data Hub hosted at Github . There is a total of 14 files in CSV format. Each CSV file contains data for a country and a union was performed to append all the data together.\r\n\r\n\r\n\r\n\r\nA new column “Table Name” was created upon the union and they reflect the CSV file names (“country_name.csv”). A split was performed on “Table Name” column such that country name remains.\r\n\r\n\r\n\r\n\r\nInitial data exploration was conducted, and it revealed that the data contains around 377 columns, most of which would not be used in the visualization. The redundant columns are removed, with 18 remaining columns, as shown below.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nAs shown in the table above, some of the country’s data split the employment status into 7 columns. Hence a further investigation was conducted on employment status. It revealed that some dataset’s employment status is a single column containing 7 unique values and some dataset split the 7 values into 7 columns with binary values.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nHence a calculated filed “New_employment_status” is required to reconcile “employment_status”.\r\n\r\n\r\n\r\n\r\nA filter was made on the “endtime” to get January 2021 data as the survey was conducted during the said period.\r\n\r\n\r\n\r\n\r\nA check was performed, and no null value was observed in the survey questions vac_1, vac2_1, vac2_2, vac2_3, vac2_6 and vac3. This was done by constructing a simple text table of each survey questions against its counts.\r\n\r\n\r\n\r\n\r\nSimilar checks were performed on age, gender, household size, household children and “New_employment_status”. While no null value was observed, inconsistency of the household size and household children were observed; most of the values were captured in the nominal form, while a small number of them were captured in the measurement form as shown below.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nThese inconsistencies were standardized to nominal format using the following calculated fields for amend for household size and children.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nVisualization\r\nGantt Chart\r\nGantt chart will be plotted to visualize the survey. A series of calculated fields and parameters would be required.\r\nParameters\r\nVaccination Question\r\nThis parameter serves to allow viewer to select from the list of 6 survey questions. The values were based on the original survey questions.\r\n\r\n\r\n\r\n\r\nMain Parameters\r\nThis parameter would allow viewer to toggle among different fields (Country, age, gender, etc.) such that the visualization would display according to viewer’s interest.There is an option called “All” to allow viewers to view at the overall level (all parameters).\r\n\r\n\r\n\r\n\r\nAge Bin Size\r\nThe age in the data needs to be binned as there is a wide range of age values. To make the age bin dynamic, parameter with the following settings was used. The bin range was set between 5-50 to ensure that the bins are meaningful.\r\n\r\n\r\n\r\n\r\nSort By\r\nThis allows interactive sorting. For this visualization, viewer will be allowed to toggle between “Alphabetical Order” and “Strongly Positive to vaccination”\r\n\r\n\r\n\r\n\r\nSort Order\r\nAllow dynamically sort by ascending or descending order, affecting all the visualizations.\r\n\r\n\r\n\r\n\r\nSecondary Parameters\r\nThis parameter will display an optional secondary field for visualization. Its settings are similar to that of the “Main Parameters”, except that it has a “Null” option to allow viewer to have the option to hide the secondary parameter.\r\n\r\n\r\n\r\n\r\nCalculated Fields\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nBuilding Steps\r\nCreate aliases for “Selected Question” so that the visualization would display the aliases instead.\r\n\r\n\r\n\r\n\r\nThe parameters “Vaccination Question” and Main Parameters” were turned on, while the Gantt Percent and Selected Parameters are pulled to Columns and Rows respectively.\r\n\r\n\r\n\r\n\r\n“Selected Question” was pulled into Color and it would display the starting position of each responses. The responses had to be sorted according to the positivity of the responses.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n“Percentage” is dropped into Size so that the chart can display the response in horizontal stacked bar chart. However, the initial result shows that the bars’ positions are truncated and the fact that this is due to “Gantt Percent” and “Percentage” being computed at table level.\r\n\r\n\r\n\r\n\r\n“Gantt Percent” and “Percentage” were then computed using “Selected Question” and the basic Gantt chart takes shape.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n“Count” is dropped into Label to display the value of the response. For this visualization, only the extreme responses of “Strongly Agreed” and “Strongly Disagreed” would display the values to preserve the aesthetics of the visualization. This was done by toggling the label to display the min/max at cell level using the “Gantt Precent” field as shown below.\r\n\r\n\r\n\r\n\r\nNext, the label is configured to show as a “percent of total”, computed using “Selected Question”.\r\n\r\n\r\n\r\n\r\nThe format of the field was then changed to percentage with 0 decimal place to ensure good aesthetics.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nCountry, age, gender, household size, household children and “New_employment_status” were dropped into filter so that the visualization could be filtered accordingly based on viewer’s interest.\r\n\r\n\r\n\r\n\r\nThe sorting parameters are included, and it would only work after the sorting of the fields are toggled to capture the returns from the sorting parameters as shown below.\r\n\r\n\r\n\r\n\r\nThe “Selected Sec Parameters” are dropped into Columns in case viewers would like to view the visualizations in 2 dimensional fields.\r\n\r\n\r\n\r\n\r\nThe final product for the Gantt chart is shown below.\r\n\r\n\r\n\r\n\r\nVisualization on Uncertainty to Visualize Strong Positive Sentiment to Covid-19 Vaccination\r\nThe visualization of the strong positive response to vaccination is presented using dot graph with error bar to show the uncertainties.\r\nParameters\r\nThis visualization will use the same parameters done in Gantt chart.\r\nCalculated Fields\r\n\r\n\r\n\r\n\r\nBuilding Steps\r\nThe base of the uncertainty visualization is based on dot graph. Thus, “Prop” and “Selected Parameters” are dropped into Columns and Rows respectively, while the Marks are changed to circle.\r\n\r\n\r\n\r\n\r\nNext, Measure values containing ”Prop_Upper_Limit” and ”Prop_Lower_Limit” was placed into Columns and the marks were changed to line for this case.\r\n\r\n\r\n\r\n\r\n“Prop” and Measure Values are then merged using dual axis with synchronizing axes. “Measure names” was droppedinto the path to generate the error bars.\r\n\r\n\r\n\r\n\r\nFor the purpose of aesthetics, this visualization would match color of the dot graph to that of the Gantt chart based on the response of interest (either strongly disagreed or strongly agreed depending on the survey question). “Color Switcher” is dropped into Color and the colors were chose based on the “Color Switcher” indicator. i.e. if color switcher shows, red, change the color to red, vice-versa.\r\n\r\n\r\n\r\n\r\nLike Gannt chart, the sort is configured to be based on the “Sort by” and “Sort Order” parameters\r\n\r\n\r\n\r\n\r\nThe “Secondary Parameter” is dropped into column in case viewers are interested to compare 2 dimensions of fields.\r\n\r\n\r\n\r\n\r\nThe final product for the visualization of uncertainty using dot graph with error bars is shown below.\r\n\r\n\r\n\r\n\r\nSurvey Question\r\nThis is a simple visualization aims to display the selected Survey Question dynamically.\r\nBuilding Steps\r\n“Vaccination Question” is dropped into Text while “Color Switcher” is dropped into color as depicted below.\r\n\r\n\r\n\r\n\r\nThe colors are then selected according to the color switcher indicator.\r\n\r\n\r\n\r\n\r\nThe final product for the visualization of the survey question is shown below.\r\n\r\n\r\n\r\n\r\nY-Axis Title\r\nThis is a simple visualization that would display the y-axis title of the visualization dynamically depending on the selection in “Selected Parameters”.\r\n\r\n\r\n\r\n\r\nThe text is toggled to display the words horizontally and the chart title is hidden.\r\n\r\n\r\n\r\n\r\nThe final product for the visualization is shown below.\r\n\r\n\r\n\r\n\r\nGantt Title 2\r\n2 y-axis titles are required, thus the “Y-Axis Title” visualization was duplicated.\r\n\r\n\r\n\r\n\r\nDashboard\r\nBuilding Steps\r\nThe dashboard size is set to “Automatic”.\r\n\r\n\r\n\r\n\r\nA horizontal container is dropped into the dashboard and the Uncertainty visualization was dropped into the container.\r\n\r\n\r\n\r\n\r\nThe Gantt chart was dropped to the right of the Uncertainty chart.\r\n\r\n\r\n\r\n\r\nThe “Y-axis Title” was dropped onto the dashboard as floating object.\r\n\r\n\r\n\r\n\r\nSame process was done for “Y-Axis Title 2” and both are positioned to the respective visualization. 2 horizontal containers are placed above the main visualization as shown. The empty container on the top left will house the main parameters like “Vaccination Question” and “Main Parameters”.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nA text box and “Survey Question” visualization is inserted in between the main visualization and the top parameters panel. Ensure that the title of the “Vaccination Question” is hidden.\r\n\r\n\r\n\r\n\r\nRemove redundant legends like “Color Switcher” on the right of the dashboard. Rearrange the order of the right panel such that the legend appears on top. “Secondary parameters” are placed in the top panel beside “Main Parameters” The title of the visualizations is also amended. The filters for the Gantt chart is also displayed.\r\n\r\n\r\n\r\n\r\nTo make the dashboard more aesthetically pleasing, the filters are changed to dropdown with multiple values and they are ordered according to the dropdown of the “Main Parameters”. The sorting parameters are then placed at the bottom of the right panel.\r\n\r\n\r\n\r\n\r\nAs the dashboard is interactive, it was observed that the tick marks intervals would change for both charts. As such, the tick marks intervals are fixed to 20% for Gantt chart and 10% for the uncertainty visualization respectively.\r\n\r\n\r\n\r\n\r\nInconsistency of the border lines between the 2 charts was observed. The Gantt chart’s borders were adjusted to be consistent to the uncertainty visualization.\r\n\r\n\r\n\r\n\r\nThe dashboard was then published onto Tableau Public.\r\n\r\n\r\n\r\n\r\nHowever, it was observed that the floating object “Y-axis Title 2” was truncated on Tableau Public, as such it was removed. The final dashboard on Tableau Public is shown below.\r\n\r\n\r\n\r\n\r\ne. 3 Observations from Final Visualization\r\nWorrying Situation in Japan\r\n\r\n\r\n\r\n\r\nOverall Japanese are most worried to vaccination and have no strong faith in their government health authority to provide effective vaccine. This is a worrying fact as its people might opt out of the vaccination and it dampen the nationwide vaccination efforts. Unfortunately, the Japanese’s worry was not unfounded as the news on 16 Feb 2021 reported that millions of vaccines might be wasted due to shortage of the required special syringe (Reuters, 16 Feb 21).\r\nIt will be wise for the Japanese governments improve the morale of its citizens.\r\nGeneration Gap\r\n\r\n\r\n\r\n\r\nIn general, the older generation would want to get vaccinated than the younger generation. This is understandable as older people are more vulnerable to Covid-19 due to their weakened immune system, thus they would have better sentiments on the vaccination. Conversely, the younger generation is less optimistic about the vaccination.\r\nChildren Makes a Difference\r\n\r\n\r\n\r\n\r\nIn general, higher proportion of household with 0 or a few children strongly agreed that they would regret if they did not get a Covid-19 vaccine when it is available. This is an interesting fact that is worth further investigation as to why households with many children are less likely to think that they strongly agree that they are going to regret not taking the vaccine when available.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-19T21:28:53+08:00",
    "input_file": "DataViz2.utf8.md"
  },
  {
    "path": "posts/dataviz/",
    "title": "DataViz Makeover 1",
    "description": "Ageing population and labour force.",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-01-28",
    "categories": [],
    "contents": "\r\nData Visualisation Link (Tableau Public) - https://public.tableau.com/profile/tan.huiyong#!/vizhome/DataVizMakeover1_16117543772550/Dashboard1?publish=yes\r\na. Critiques and Suggestions for Current Visualisations\r\n\r\n\r\n\r\nS/N\r\nCritique Area\r\nDescription\r\n1\r\nClarity\r\nThe chart is not representative of what the accompanying text was trying to convey. The accompanying text focuses on resident labour force of age 25 to 54 and 55 a & above, but the chart binned he age in groups of 5 years. Moreover, the text mentioned about the increase of Labour Force Participation Rate (LFPR) for resident labour force aged 25 to 54 from 2009 to 2019, but LFPR was not even shown in the chart.\r\n2\r\nClarity\r\nThe age in the x-axis is binned, such that 40-44 years old is in one bin. However, the chart attempted to show an increase of median age of the labour force from 41 to 44 years old by showing a shift in the median age by 3 years within the same bin. This representation is misleading and should be avoided.\r\n3\r\nClarity\r\nIt is not clear to the readers to be able to observe the increase of the share of residents aged 55 & over in the labour force at first glance\r\n4\r\nAesthetics\r\nThe colour theme used is simple and clear, will adopt the simplistic approach in visualization.\r\n5\r\nAesthetics\r\nThere is not tick mark for the y axis, viewers must look at both the table and the graph to make sense out of it. Tick marks should be added\r\n6\r\nAesthetics\r\nThe axis label is located at an odd position, outside the chart area. It is non-intuitive for reader to understand the representation of the y-axis at first glance\r\n7\r\nAesthetics\r\nThe chart is unable to display all the information described in the accompany text. More visualizations are needed to display all of the information.\r\nb. Proposed alternative data visualisation\r\n\r\n\r\n\r\nThe proposed visualization is designed to overcome the misrepresentation of the original chart. The age groups are now binned according to the age band described by the accompany text in “25-54” and “55 & abv”. \r\nNext, It would also display the changes of the age group composition of the labour force. \r\nLastly, the visualization would also display teh changes of the LFPR by each age group.\r\nd. Step-by-step description of visualization\r\ns/n\r\nArea\r\nAction\r\n1\r\nThe original data source is not in a report summary format where the rows do not represent the individual records of the data and direct import of such data would result in inaccuracy \r\nCheck “Cleaned with Data Intepreter” to clean up the format  \r\n2\r\nColumn “F1” is not applicable in the visualization\r\nColumn is hidden away. \r\n3\r\nThe years are split into respective columns. It limits the visualization aspect.\r\nPivoting the data to collapse the years into a single column and rename the pivoted columns to “Year” “Age” and “Labour Force Participation Rate”. \r\n4\r\nRemnants of summary report that are not required in the visualization, like “Total” in “Age Group”, “25 – 64” is present. \r\nFilter is applied to get the age groups in the bins of 5 years.  \r\n5\r\nExport data\r\nThe transformed data is copied in the Microsoft Excel and is saved.\r\n6\r\nThe data source contains information on resident labour force participation rate by age, but it does not contain data on the labour force population by age.\r\nAnother data table is required to provide the data on labour force population. Such data is found on the same publication as the original data source, at https://stats.mom.gov.sg/Pages/Labour-Force-Tables2019.aspx, Table 7: RESIDENT LABOUR FORCE AGED FIFTEEN YEARS AND OVER BY AGE AND SEX, 2009 -2019 (JUNE)\r\n7\r\nFormat of data is similar to Table 5, transformation required.\r\nStep 1 to 5 is repeated for Table 7.\r\n8\r\nCombining 2 data sources\r\nThe 2 data sources are combined into one data table using inner join. As the data tables are in pivot format, the inner join is on both “Age” and “Year in order to ensure 1:1 join relationship. \r\n9\r\nCreate new group [Age Group]\r\nThe Age are grouped into “15-24”, “25-54” and “55 & Abv” as this would be reflective to the description of the text accompanying the visualization. \r\n10\r\nData could not be published on Tableau Public\r\nThe data needs to be changed to “Extract” for the data to be published on Tableau. \r\n11\r\nCreate calculated field [Labour Force Participation]\r\n|\r\n12\r\nCreate calculated field [Total Labour Force]\r\nThis is to get the total labour force per year. \r\n13\r\nCreate calculated field [Share of Labour Force]\r\nThis is to get the share of the labour force per age group per year. \r\n14\r\nConvert [Year] to discrete\r\nThis would make filtering year 2009 and 2019 easier. \r\n15\r\nCreating Pie Chart to display changes in age composition of labour force from 2009 to 2019\r\nFitlering of year. \r\n16\r\nContinued…\r\nColumn settings. \r\n17\r\nContinued…\r\nOther Parameters \r\n18\r\nContinued…\r\nThe labels settings. \r\n19\r\nThe resulting pie chart\r\n\r\n20\r\nTransforming into Donut Chart\r\nThe pie chart is insufficient to present all of the information required, thus, the pie chart is converted to a donut chart.\r\n21\r\nContinued…\r\nCreation of dummy calculated field for donut chart \r\n22\r\nContinued…\r\nCreate a dual axis using the dummy measure value with dual axis \r\n23\r\nContinued…\r\nSet the second chart as circle. Use [Total Labour Force] as the label and adjust position it in the centre of the donut.\r\nThe centre of the donut chart will have labels that include the total labour force of the respective years and the median age.\r\nThe median age is created using calculated field with the following formula: if [Year] = 2009 then 41 elseif [Year] = 2019 then 44 END\r\n24\r\nContinued…\r\nChange the colour to white and reduce the size so that a donut is formed.\r\n25\r\nContinued…\r\nThe label is then customized to display the crucial information. \r\n26\r\nThe resulting visualization of donut chart.\r\n\r\n27\r\nCreating line chart that depicts the changes in LFPR in each age group from 2009 and 2019\r\nThis chart would shows the trend, changes of the LFPR over the 10 years\r\n28\r\nCreate calculated field [LFP Age Group] for each age group\r\n\r\n29\r\nCreate calculated field [Labour Force Age Group] for each age group\r\n\r\n30\r\nCreate calculated field [LDPR Age Group] for each age group\r\n\r\n31\r\nSetting parameters of the line chart\r\nQuick table calculation of “Difference” is applied onto [LFPR Age Group].\r\nThis would allow the line chart to display the percentage difference.\r\n32\r\nDashboard of the visualization.\r\nBoth the donut and the line charts are placed in the dashboard to show the necessary data.\r\ne. Observations from Final Visualization\r\n\r\n\r\n\r\nFigure 1: Final Visualization\r\n\r\n\r\n\r\nAge group 55 & abv shows increase in most of the years between 2009 and 2019. This suggests that the LFPR of the older resident increases as Singapore experiences ageing population.\r\nAge group 25-54 has also shown increase in LFPR from 2009 to 2019 despite its decreasing share in labour force. This suggests that the resident labour force is ageing as well.\r\nThere is an increase in the total resident labour force from 2009 and 2019 despite the effects of ageing population.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-19T21:24:09+08:00",
    "input_file": "DataViz1.utf8.md"
  },
  {
    "path": "posts/2021-01-04-my-first-post/",
    "title": "My First Post",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-01-04",
    "categories": [],
    "contents": "\r\n1.0 Overview\r\nCorrelation coefficient is a popular statistic that use to measure the type and strength of the relationship between two variables. The values of a correlation coefficient ranges between -1.0 and 1.0. A correlation coefficient of 1 shows a perfect linear relationship between the two variables, while a -1.0 shows a perfect inverse relationship between the two variables. A correlation coeficient of 0.0 shows no linear relationship between the two variables.\r\nWhen multivariate data are used, the correlation coeficeints of the pair comparisons are displayed in a table form known as correlation matrix or scatterplot matrix.\r\nThere are three broad reasons for computing a correlation matrix.\r\nTo reveal the relationship between highdimensional variables pairwisely.\r\nTo input into other analyses. For example, people commonly use correlation matrixes as inputs for exploratory factor analysis, confirmatory factor analysis, structural equation models, and linear regression when excluding missing values pairwise.\r\nAs a diagnostic when checking other analyses. For example, with linear regression a high amount of correlations suggests that the linear regression’s estimates will be unreliable.\r\nWhen the data is large, both in terms of the number of observations and the number of variables, Corrgram tend to be used to visually explore and analyse the structure and the patterns of relations among variables. It is designed based on two main schemes:\r\nRendering the value of a correlation to depict its sign and magnitude, and\r\nReordering the variables in a correlation matrix so that “similar” variables are positioned adjacently, facilitating perception.\r\nIn this hands-on exercise, you will learn how to plot data visualisation for visualising correlation matrix with R. It consists of three main sections. First, you will learn how to create correlation matrix using pairs() of R Graphics. Next, you will learn how to plot corrgram using corrplot package of R Lastly, you will learn how to create an interactive correlation matrix using plotly R. .\r\n2.0 Installing and Launching R Packages\r\nBefore you get started, you are required:\r\nto start a new R project, and\r\nto create a new R Markdown document.\r\nNext, you will use the code chunk below to install and launch corrplot, ggpubr, plotly and tidyverse in RStudio.\r\n\r\n\r\npackages = c('ggpubr', 'tidyverse')\r\n\r\nfor(p in packages){library\r\n  if(!require(p, character.only = T)){\r\n    install.packages(p)\r\n  }\r\n  library(p, character.only = T)\r\n}\r\n\r\n\r\n\r\n3.0 Importing and Preparing The Data Set\r\nIn this hands-on exercise, the Wine Quality Data Set of UCI Machine Learning Repository will be used. The data set consists of 13 variables and 6497 observations. For the purpose of this exercise, we have combined the red wine and white wine data into one data file. It is called wine_quality and is in csv file format.\r\n3.1 Importing Data\r\nFirst, let us import the data into R by using read_csv() of readr package.\r\n\r\n\r\nwine <- read_csv(\"data/wine_quality.csv\")\r\n\r\n\r\n\r\nNotice that beside quality and type, the rest of the variables are numerical and continuous data type.\r\n4.0 Univariate EDA with Histogram\r\nIn the figure below, multiple histograms are plottted to reveal the distribution of the selected variables in the wine quality data sets.\r\n\r\n\r\n\r\nThe code chunks used to create the data visualisation consists of two main parts. First, we will create the individual histograms using the code chunk below.\r\n\r\n\r\nfa <- ggplot(data=wine, aes(x= `fixed acidity`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nva <- ggplot(data=wine, aes(x= `volatile acidity`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nca <- ggplot(data=wine, aes(x= `citric acid`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nrs <- ggplot(data=wine, aes(x= `residual sugar`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nch <- ggplot(data=wine, aes(x= `chlorides`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nfSO2 <- ggplot(data=wine, aes(x= `free sulfur dioxide`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\ntSO2 <- ggplot(data=wine, aes(x= `total sulfur dioxide`)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\ndensity <- ggplot(data=wine, aes(x= density)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\npH <- ggplot(data=wine, aes(x= pH)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nsulphates <- ggplot(data=wine, aes(x= sulphates)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\nalcohol <- ggplot(data=wine, aes(x= alcohol)) +\r\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\r\n\r\n\r\n\r\nNext, the ggarrange function of ggpur package is used to group these histograms together.\r\n\r\n\r\nggarrange(fa, va, ca, rs, ch, fSO2, tSO2, density, pH, sulphates, alcohol, \r\n          ncol = 4, nrow = 3)\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-01-04-my-first-post/my-first-post_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2021-01-04T21:15:44+08:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Distill Blog 1",
    "description": "Welcome to our new blog, Distill Blog 1. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Tan Huiyong",
        "url": "https://sg.linkedin.com/in/tan-huiyong-72a1224b"
      }
    ],
    "date": "2021-01-04",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-01-04T21:00:26+08:00",
    "input_file": {}
  }
]
